import{i as s,a as u}from"./index-BPG8iO8t-Dxwj77k8.js";import{$ as d,a as p,P as f,b as m,D as h,f as P,c as C}from"./MilkdownEditor-BItiUuSt.js";import"./index-C5Q1Okh6.js";import"./index.dom-C3-224fz.js";import"./mutex-yV3mxE7x.js";function b(n){var e;return n.childCount<=1&&!((e=n.firstChild)!=null&&e.content.size)}function g(n,e){const{selection:t}=n;if(!t.empty)return null;const o=t.$anchor,r=o.parent;if(r.content.size>0||P(a=>a.type.name==="table")(o))return null;const i=o.before();return C.node(i,i+r.nodeSize,{class:"crepe-placeholder","data-placeholder":e})}const c=d({text:"Please enter...",mode:"block"},"placeholderConfigCtx"),y=p(n=>new f({key:new m("CREPE_PLACEHOLDER"),props:{decorations:e=>{var t;const o=n.get(c.key);if(o.mode==="doc"&&!b(e.doc)||s(e.selection)||u(e.selection))return null;const r=(t=o.text)!=null?t:"Please enter...",l=g(e,r);return l?h.create(e.doc,[l]):null}}})),v=(n,e)=>{n.config(t=>{e&&t.update(c.key,o=>({...o,...e}))}).use(y).use(c)};export{v as defineFeature,c as placeholderConfig,y as placeholderPlugin};
